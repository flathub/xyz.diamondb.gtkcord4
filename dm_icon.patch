From 7ff328ae3d0f1143a80e2ea3ea96d91729cbcad2 Mon Sep 17 00:00:00 2001
From: milkknife <111794344+milkknife@users.noreply.github.com>
Date: Sat, 4 Feb 2023 12:17:12 +0100
Subject: [PATCH] Better DM icon (#104)

* change direct message icon to gtkcord4 logo

* direct message icon - use papirus-icon-theme user-available

* dm icon - use google material message symbol dark/light

* dm/guild icons - set padding/CSS
---
 internal/gtkcord/sidebar/directbutton/button.go |  11 ++++++++---
 internal/gtkcord/sidebar/guilds/guilds.go       |   3 +++
 internal/icons/png/dm-dark.png                  | Bin 0 -> 2051 bytes
 internal/icons/png/dm-light.png                 | Bin 0 -> 3030 bytes
 internal/icons/svg/dm-dark.svg                  |   1 +
 internal/icons/svg/dm-light.svg                 |   1 +
 6 files changed, 13 insertions(+), 3 deletions(-)
 create mode 100644 internal/icons/png/dm-dark.png
 create mode 100644 internal/icons/png/dm-light.png
 create mode 100644 internal/icons/svg/dm-dark.svg
 create mode 100644 internal/icons/svg/dm-light.svg

diff --git a/internal/gtkcord/sidebar/directbutton/button.go b/internal/gtkcord/sidebar/directbutton/button.go
index 35ee6ea..989932e 100644
--- a/internal/gtkcord/sidebar/directbutton/button.go
+++ b/internal/gtkcord/sidebar/directbutton/button.go
@@ -2,11 +2,13 @@ package directbutton
 
 import (
 	"context"
+	"math"
 
 	"github.com/diamondburned/gotk4/pkg/gtk/v4"
 	"github.com/diamondburned/gotkit/gtkutil/cssutil"
 	"github.com/diamondburned/gtkcord4/internal/gtkcord"
 	"github.com/diamondburned/gtkcord4/internal/gtkcord/sidebar/sidebutton"
+	"github.com/diamondburned/gtkcord4/internal/icons"
 )
 
 type Button struct {
@@ -22,21 +24,24 @@ var dmButtonCSS = cssutil.Applier("sidebar-dm-button-overlay", `
 		padding: 4px 12px;
 		border-radius: 0;
 	}
+	.sidebar-dm-button image {
+		padding-top: 4px;
+		padding-bottom: 2px;
+	}
 `)
 
 func NewButton(ctx context.Context, open func()) *Button {
 	b := Button{ctx: ctx}
 
-	icon := gtk.NewImageFromIconName("user-available")
+	icon := gtk.NewImageFromPixbuf(icons.Pixbuf("dm"))
 	icon.SetIconSize(gtk.IconSizeLarge)
-	icon.SetPixelSize(gtkcord.GuildIconSize)
+	icon.SetPixelSize(int(math.Round(gtkcord.GuildIconSize * 0.85)))
 
 	b.Button = gtk.NewButton()
 	b.Button.AddCSSClass("sidebar-dm-button")
 	b.Button.SetTooltipText("Direct Messages")
 	b.Button.SetChild(icon)
 	b.Button.SetHasFrame(false)
-	b.Button.SetHAlign(gtk.AlignCenter)
 	b.Button.ConnectClicked(func() {
 		b.Pill.State = sidebutton.PillActive
 		b.Pill.Invalidate()
diff --git a/internal/gtkcord/sidebar/guilds/guilds.go b/internal/gtkcord/sidebar/guilds/guilds.go
index 16bdd67..b0db65a 100644
--- a/internal/gtkcord/sidebar/guilds/guilds.go
+++ b/internal/gtkcord/sidebar/guilds/guilds.go
@@ -54,6 +54,9 @@ type currentGuild struct {
 }
 
 var viewCSS = cssutil.Applier("guild-view", `
+	.guild-view {
+		margin: 4px 0;
+	}
 	.guild-view button:active:not(:hover) {
 		background: initial;
 	}
diff --git a/internal/icons/png/dm-dark.png b/internal/icons/png/dm-dark.png
new file mode 100644
index 0000000000000000000000000000000000000000..0e8a0263b96d8215fe1552d75a3218ce2e97f986
GIT binary patch
literal 2051
zcmeH|X-v~e7{;fy$`u3^ypUrT6<H4o6e{JYSP&|dA~y;ZQA9wNBIRnK<q&a2il8pY
zp{NUr2y!SD<x&=iT<wCwa#U`L919jH^Z@oxOg1ql`+bvrGs!#8GtX~kGGFEwdpj$6
z*`2Zg0C~K%g#!REXbJ<02&m;xRTV=`<E*s<0RZY=0Ael!AcCxz2>?Qo08DxTfXM)0
z8#(*c2@_}m?rmdb0l<@FO+84-kgeTAAaiX2QjsH}&`gSgCs<1H;Ba~AJ=yNvfdFji
zz+0F*MfA>aiC421cGP`d^xTG4>EA3}O8E)Dx33XfYOhenA*{<g*o%{vrP<2KZRmV_
z+3k(MEBxt)qkbW7vW+)zaZ+6B_5kzWkEhL;H|#o!%b3Vi-9nH}RWw||_fr;U?k76*
zz0YW!&B3yH>x|mxX}knpi}B6awzZ3XSGi7+uXS?w@uLKVQ(X(D`k2fa&({@hrBRWB
ziH^LPnnM>VX=cLRw846XB<1AB;egK0fov0c6*v8T1<2lcvL=cyt_W;MX=*B;aw+m(
zOpYlV)3jnL^@YteGb(+F2DK5T2fOVBvErna73W8+AU4`m;HGPUde215tNJt*I12lj
zsvnje9evb2{ehjCL&1S6tbwzM5$2>oC4sq^RZY{$?kn@*s`Gd)n6l>}dubt%b+ENs
z<R8Y!bLhIm2|Z*-RJh(xo9)J8XcgB-j?2`w#@E*`OOY7W5y1`D^xET#!&YWkQZ>ey
zlgAJu2X*pAHphN-h|1;HD~p=j(ClZ$-M(tOwp&L#bpR#H(*t$JY*W|i>Se+EAOscv
zd04d2O~5WwCPUKbh>Yrz$PmF|wAi6mX2Sh-Q)8FO!dtn5MlBjVVl_NIUO2dg_*<sJ
zrcp*;Wx4wS_cVWc8SoHIbrm&CH{UK8#~~U<325a3HFcr^mKzSXoT}KJC7)_S9*8bD
zrX}2%>)wCK=8uc04(_I_d9wilT~F068lEykH#BS=p?{Jpa+3JfUr`FViO^V`FJk3a
zt18-jE=L*P9+w%!V@0tp&5YoYWbN^M;pRDUd^~=31H!RCv|e6&eDA6@l2eHQ@GU^v
z7HA-0F?Iio|JoZ&z=geRGaFr3kSnL;$ZOBb*bg}C`L$KzpRZNIf#*;g+R;`SOpt}I
z^nG1chdB3@%GU!7m&-QG;>pQrA6sOJt6}NsDeY|EM_O9tCT&qfz<G0RCC9i>NSn>e
z)B&6Vfx%82`j@2<?UcDq0CQqyy2txnKH;{n*)nQO_b$k-AI;M7oIGV@Xjm0+e(!=i
z9ORtq>Gud@HzpS{UN9ItnuO9I=fTH|hib}#N6;iA>hq_Xrm!Pge=bYr<=RqH_0q8|
zCa@!7RML-GCS;9Omm-(w$-y^a9&z9Zo_~)a2`-&(y(2mIFg2PyH#i(VxiBPZwRH&^
zFi6;VgzoMAKvaFQh}&&$Z`B(Oi>+N(B2h$vU)5Lkcz^>~$*IS{jlM)Y1NRaR)h0;C
zj3urX@zz0tPsOaIYVXQJo=(?ISc!z}Lp=m}#U8}<b^QADPJPIm8(Xk|_VLImR)BJa
z-5=I+fv*hLa-Oam>iD<-iYF9!Zs!U?xPVZ?njpC%AhFXAUP22lb$)owzv#U1hh!A&
z<&;F|a$Wn$i(ays?ul{vSnCeNpj2|>3ucMr1}P1UrjzKxOcKM}`z;?w#l!8}QdC>6
zkf@*hNmKgRTUtberBTh>%~(F`WAk6noQl5~sEO};yjxKrj|CC$kzSUZ!I@neO<F|^
z2P7r+FcZ})B%HHMrY9qM{*i(yN-XYy>cNtvcAU6T6+@3&7KNSGvbZ&^S;tehynC-o
z%rxH0`WWe3LFp-*P7Dcg7c{DTkjxE*4Xk~Q|5`7z8Sp^+v|Th6mIf5uL$P$DoI6AD
z!JNJ112v$B)YCtR)PshTt}X_37=uFXM<Ovuq_g)s+i!rtpmTobBfkgqbiV>67hE|I
qu<xG}D1L!HA(S(L<Zl>#4Dv8WAN`fdh)eK>7=X95vnW35756s))f<rj

literal 0
HcmV?d00001

diff --git a/internal/icons/png/dm-light.png b/internal/icons/png/dm-light.png
new file mode 100644
index 0000000000000000000000000000000000000000..e5e7e909f138f7f8a4527d6b381d0c6700332139
GIT binary patch
literal 3030
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
Hd~f~(HA=Jk

literal 0
HcmV?d00001

diff --git a/internal/icons/svg/dm-dark.svg b/internal/icons/svg/dm-dark.svg
new file mode 100644
index 0000000..c4372f8
--- /dev/null
+++ b/internal/icons/svg/dm-dark.svg
@@ -0,0 +1 @@
+<svg xmlns="http://www.w3.org/2000/svg" height="48" width="48"><path d="M4 40.4V7q0-1.15.9-2.075Q5.8 4 7 4h34q1.15 0 2.075.925Q44 5.85 44 7v26q0 1.15-.925 2.075Q42.15 36 41 36H12l-5.45 5.45q-.7.7-1.625.325Q4 41.4 4 40.4Z" fill="#DEDEDE"/></svg>
diff --git a/internal/icons/svg/dm-light.svg b/internal/icons/svg/dm-light.svg
new file mode 100644
index 0000000..88e6599
--- /dev/null
+++ b/internal/icons/svg/dm-light.svg
@@ -0,0 +1 @@
+<svg xmlns="http://www.w3.org/2000/svg" height="48" width="48"><path d="M4 40.4V7q0-1.15.9-2.075Q5.8 4 7 4h34q1.15 0 2.075.925Q44 5.85 44 7v26q0 1.15-.925 2.075Q42.15 36 41 36H12l-5.45 5.45q-.7.7-1.625.325Q4 41.4 4 40.4Z" fill="#2E3436"/></svg>
